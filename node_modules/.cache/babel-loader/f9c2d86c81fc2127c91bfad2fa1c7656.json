{"ast":null,"code":"function setToken(token) {\n  if (token) {\n    localStorage.setItem('token', token);\n  } else {\n    localStorage.removeItem('token');\n  }\n}\n\nfunction getUserFromToken() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\n\nfunction getToken() {\n  let token = localStorage.getItem('token');\n\n  if (token) {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n\n    if (payload.exp < Date.now() / 1000) {\n      localStorage.removeItem('token');\n      token = null;\n    }\n  }\n\n  return token;\n}\n\nfunction removeToken() {\n  localStorage.removeItem('token');\n}\n\nexport default {\n  setToken,\n  getToken,\n  getUserFromToken,\n  removeToken\n};","map":{"version":3,"sources":["/Users/Marcus/code/sandbox/binge/src/services/tokenService.js"],"names":["setToken","token","localStorage","setItem","removeItem","getUserFromToken","getToken","JSON","parse","atob","split","user","getItem","payload","exp","Date","now","removeToken"],"mappings":"AAAA,SAASA,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,MAAIA,KAAJ,EAAW;AACTC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACD,GAFD,MAEO;AACLC,IAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACD;AACF;;AAEH,SAASC,gBAAT,GAA6B;AAC3B,QAAMJ,KAAK,GAAGK,QAAQ,EAAtB;AACA,SAAOL,KAAK,GAAGM,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACR,KAAK,CAACS,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,EAAsCC,IAAzC,GAAgD,IAA5D;AACD;;AAED,SAASL,QAAT,GAAoB;AAClB,MAAIL,KAAK,GAAGC,YAAY,CAACU,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIX,KAAJ,EAAW;AACT,UAAMY,OAAO,GAAGN,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACR,KAAK,CAACS,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB;;AACA,QAAIG,OAAO,CAACC,GAAR,GAAcC,IAAI,CAACC,GAAL,KAAa,IAA/B,EAAqC;AACnCd,MAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACAH,MAAAA,KAAK,GAAG,IAAR;AACD;AACF;;AACD,SAAOA,KAAP;AACD;;AAED,SAASgB,WAAT,GAAuB;AACnBf,EAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACH;;AAED,eAAe;AACXJ,EAAAA,QADW;AAEXM,EAAAA,QAFW;AAGXD,EAAAA,gBAHW;AAIXY,EAAAA;AAJW,CAAf","sourcesContent":["function setToken(token) {\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    } \n  }\n  \nfunction getUserFromToken () {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split('.')[1])).user : null;\n}\n\nfunction getToken() {\n  let token = localStorage.getItem('token');\n  if (token) {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    if (payload.exp < Date.now() / 1000) {\n      localStorage.removeItem('token');\n      token = null;\n    }\n  }\n  return token;\n}\n\nfunction removeToken() {\n    localStorage.removeItem('token');\n}\n\nexport default {\n    setToken,\n    getToken,\n    getUserFromToken,\n    removeToken,\n  };"]},"metadata":{},"sourceType":"module"}